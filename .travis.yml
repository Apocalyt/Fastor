language: cpp

os:
  - linux

dist: bionic

compiler:
  - gcc
  - clang

matrix:
  fast_finish: true
  include:
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-5
      env:
         - MATRIX_EVAL="CC=gcc-5 && CXX=g++-5"

    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-6
      env:
        - MATRIX_EVAL="CC=gcc-6 && CXX=g++-6"

    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-7
      env:
        - MATRIX_EVAL="CC=gcc-7 && CXX=g++-7"

    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-8
      env:
        - MATRIX_EVAL="CC=gcc-8 && CXX=g++-8"

    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-8
      env:
        - MATRIX_EVAL="CC=gcc-9 && CXX=g++-9"


before_install:
  - eval "${MATRIX_EVAL}"
  - FASTORPATH=$(pwd)
  - echo $FASTORPATH

install:
  # build the tests
  - cd ~
  - cd $FASTORPATH/tests
  - mkdir build && cd build
  - cmake -DCMAKE_BUILD_TYPE=Debug ../
  - make -j2

script:
  # Run the test suite
  - cd ~
  - cd $FASTORPATH/tests/build/
  - ctest -V


notifications:
  email: false